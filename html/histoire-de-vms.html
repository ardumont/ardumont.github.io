<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<title>plan de domination mondiale</title>
<!-- 2014-12-01 Mon 23:46 -->
<meta  http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta  name="generator" content="Org-mode" />
<meta  name="author" content="Antoine R. Dumont" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center; }
  .todo   { font-family: monospace; color: red; }
  .done   { color: green; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  pre.src-sh:before    { content: 'sh'; }
  pre.src-bash:before  { content: 'sh'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-R:before     { content: 'R'; }
  pre.src-perl:before  { content: 'Perl'; }
  pre.src-java:before  { content: 'Java'; }
  pre.src-sql:before   { content: 'SQL'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.right  { text-align: center;  }
  th.left   { text-align: center;   }
  th.center { text-align: center; }
  td.right  { text-align: right;  }
  td.left   { text-align: left;   }
  td.center { text-align: center; }
  dt { font-weight: bold; }
  .footpara:nth-child(2) { display: inline; }
  .footpara { display: block; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  /*]]>*/-->
</style>
<link rel="stylesheet" href="../other/style.css" type="text/css"/>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">plan de domination mondiale</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">plan de domination mondiale</a>
<ul>
<li><a href="#sec-1-1">pallet</a></li>
<li><a href="#sec-1-2">pool de vms</a></li>
<li><a href="#sec-1-3">api</a></li>
<li><a href="#sec-1-4">Cote client donc wikeo</a></li>
</ul>
</li>
<li><a href="#sec-2">Avantages/Inconvients</a>
<ul>
<li><a href="#sec-2-1">dev open-source</a></li>
<li><a href="#sec-2-2">dev wikeo</a></li>
</ul>
</li>
<li><a href="#sec-3">Conclusion</a></li>
</ul>
</div>
</div>
<p>
Je viens de finir de lire le chapitre 11 de clojure in action a propos de rabbitmq.
Je sais pas trop pourquoi mais ca m'a fait repenser aux pools de vms qu'on pourrait exploiter pour accelerer
l'execution des runs fitnesse.
</p>

<p>
Bref, du coup, je relance le sujet entre nous parce qu'en reflechissant un peu, je me dis que ca vaut le coup d'y passer
un peu de temps.
</p>

<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1">plan de domination mondiale</h2>
<div class="outline-text-2" id="text-1">
<p>
Voici ce que je propose comme plan, si ca vous interesse:
</p>
</div>

<div id="outline-container-sec-1-1" class="outline-3">
<h3 id="sec-1-1">pallet</h3>
<div class="outline-text-3" id="text-1-1">
<p>
 On apprend pallet pour faire des vms qui vont bien.
Soit les vms st statiques une fois qu'on sait les créer soit le coût pallet est minime et on orchestre du pallet
directement de l'appli pour lancer la construction des vms&#x2026;
(On peut aussi se passer de pallet ds un premier temps et utiliser veewee ou vbox direct&#x2026;)
</p>
</div>
</div>

<div id="outline-container-sec-1-2" class="outline-3">
<h3 id="sec-1-2">pool de vms</h3>
<div class="outline-text-3" id="text-1-2">
<p>
On créé LE pool de vms.
La le coeur de l'application open-source ecrite en clojure :D
(Ca permettrait a Dawid et Massyl de monter en competences sur le sujet :D tout en nous apportant plein de geniales
idees d'archi)
</p>

<p>
On s'organise comme on veut pour la stack, je pensais a ca:
</p>
<ul class="org-ul">
<li>Rabbitmq pour communiquer entre les vms si on a plusieurs vms qui travaillent ou autres et qu'on a des besoins de
communication entre elles&#x2026; (s'il y a reellement le besoin, dans un premier temps, on peut peut etre faire simple et
s'en passer)
</li>
<li>Datomic pour la persistence&#x2026; ou sont les vms (ec2), ds quel état (creating, created, running, terminated, etc&#x2026;) &#x2026;.
</li>
<li>Compojure pour exposer l'api rest (ou autre&#x2026;)
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-1-3" class="outline-3">
<h3 id="sec-1-3">api</h3>
<div class="outline-text-3" id="text-1-3">
<p>
On expose uniquement une api pour créer, exposer, détruire des vms. On ne sait pas a quoi serviront les vms, on expose
juste un moyen d'en creer (c'est le client qui enverra sa configuration, d'ou l'histoire de pallet initialement&#x2026;).
</p>
</div>
</div>

<div id="outline-container-sec-1-4" class="outline-3">
<h3 id="sec-1-4">Cote client donc wikeo</h3>
<div class="outline-text-3" id="text-1-4">
<p>
En tant que client (donc la, on redevient dev wikeo), on appelle de fitnesse cette api.
Le premier pb que je vois il faut dire a wikeo ou se trouve lily &#x2026; (dev wikeo, je sais que c'est dans le
resource.properties que cette conf se trouve).
Solution: on expose un fichier resource.properties via http, la variable de serveur
WIKEO<sub>PROPERTIES</sub><sub>DIR</sub>=<a href="http://toto.expose.com">http://toto.expose.com</a> (on peut le faire desormais cyril a fait évoluer notre conf pour ça)
Ce fichier contiendra l'acces aux vms qui vont bien pour solr et lily.
</p>

<p>
Donc, cote wikeo il y aurait:
</p>
<ul class="org-ul">
<li>juste ce setup de fichier de conf du serveur fitnesse a changer
</li>
<li>l'url rest du reset a virer et remplacer par notre api rest de recuperation de la vm.
</li>
<li>l'url de destruction de la vm aps le run fitnesse
</li>
<li>détruire les histoires de tokens foireux pour empêcher le run fitnesse multiple&#x2026; bref, detruire help-data-test
</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2">Avantages/Inconvients</h2>
<div class="outline-text-2" id="text-2">
</div><div id="outline-container-sec-2-1" class="outline-3">
<h3 id="sec-2-1">dev open-source</h3>
<div class="outline-text-3" id="text-2-1">
<p>
L'avantage en tant que dev open-source:
</p>
<ul class="org-ul">
<li>on fait de l'open source
</li>
<li>on apprend clojure
</li>
<li>on apprend pallet
</li>
<li>on apprend compojure
</li>
<li>on apprend datomic
</li>
<li>on apprend a etre de vrais devops
</li>
<li>j'oublie temporairement toutes les histoires a propos de lily, moi, ce qui m'interesse eventuellement, c'est la stack
hadoop et solr mais pas forcement lily.
</li>
<li>On créerait la nuit un 'framework' d'exposition de vms via rest qu'on exploiterait le jour&#x2026; donc on pourrait se
retrouver ds une situation vertueuse ou on s'auto alimente des besoins le jour (bugs, evo, etc&#x2026;) ;)
</li>
</ul>

<p>
Les inconvenients, j'en vois pas.
</p>
</div>
</div>

<div id="outline-container-sec-2-2" class="outline-3">
<h3 id="sec-2-2">dev wikeo</h3>
<div class="outline-text-3" id="text-2-2">
<ul class="org-ul">
<li>on gicle toute la stack locale concernant fitnesse
</li>
<li>on a des runs concurrentiels possibles dans fitnesse
</li>
<li>Par ailleurs, dernier point benefique, si ca marche pour fitnesse, pourquoi cela ne fonctionnerait pas pour les tests
</li>
</ul>
<p>
d'integration wikeo? Donc on s'ouvre les portes pour avoir des temps de ouf avec les runs de tests d'integration. On
degage le lily-embedded en mode embedded et on utilise lily-embedded en mode connect (on fournit une vm pour chaque
test d'integration et on peut lancer plusieurs itests en parallele&#x2026;)
</p>
<ul class="org-ul">
<li>point important: on "n'empiete" pas sur ngdata, on embrasse le cote obscur et on essaye d'ameliorer&#x2026;
</li>
<li>point important: on ne parle plus de hashmap, donc plus de mot tabou cote wikeo.
</li>
</ul>

<p>
Les inconvenients, j'en vois pas.
</p>
</div>
</div>
</div>

<div id="outline-container-sec-3" class="outline-2">
<h2 id="sec-3">Conclusion</h2>
<div class="outline-text-2" id="text-3">
<p>
Bref, je pense que ca nous rapporterait bcp plus cette direction que la direction qu'on a deja prise de faker lily.
En tant que dev et dev wikeo, on manipulerait des technos qui nous interessent.
</p>

<p>
Ça me plaît bcp ;) et ca ne me parait pas deconnant, qu'en pensez vous ?
</p>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: Antoine R. Dumont</p>
<p class="date">Created: 2014-12-01 Mon 23:46</p>
<p class="creator"><a href="http://www.gnu.org/software/emacs/">Emacs</a> 24.4.1 (<a href="http://orgmode.org">Org</a> mode 8.2.10)</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
