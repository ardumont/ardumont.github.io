<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<title>Possible team workflow with git</title>
<!-- 2014-12-01 Mon 23:46 -->
<meta  http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta  name="generator" content="Org-mode" />
<meta  name="author" content="Antoine R. Dumont" />
<meta  name="description" content="Possible team workflow with git"
 />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center; }
  .todo   { font-family: monospace; color: red; }
  .done   { color: green; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  pre.src-sh:before    { content: 'sh'; }
  pre.src-bash:before  { content: 'sh'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-R:before     { content: 'R'; }
  pre.src-perl:before  { content: 'Perl'; }
  pre.src-java:before  { content: 'Java'; }
  pre.src-sql:before   { content: 'SQL'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.right  { text-align: center;  }
  th.left   { text-align: center;   }
  th.center { text-align: center; }
  td.right  { text-align: right;  }
  td.left   { text-align: left;   }
  td.center { text-align: center; }
  dt { font-weight: bold; }
  .footpara:nth-child(2) { display: inline; }
  .footpara { display: block; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  /*]]>*/-->
</style>
<link rel="stylesheet" href="../other/style.css" type="text/css"/>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">Possible team workflow with git</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">Introduction</a></li>
<li><a href="#sec-2">One possible workflow</a>
<ul>
<li><a href="#sec-2-1">Retrieve the repository needed</a></li>
<li><a href="#sec-2-2">Clone this repository</a>
<ul>
<li><a href="#sec-2-2-1">Go to the desired folder to receive the clone of the repository</a></li>
<li><a href="#sec-2-2-2">Then clone the repository</a></li>
</ul>
</li>
<li><a href="#sec-2-3">We create a branch from master to develop our fix or our functionality.</a></li>
<li><a href="#sec-2-4">You do your dev regularly, add the files and commit.</a></li>
<li><a href="#sec-2-5">Regularly, return to master to synchronize the source.</a></li>
<li><a href="#sec-2-6">Why does git refuse to checkout my branch?</a></li>
<li><a href="#sec-2-7">Now, we're synchronized with master, we return to our branch and merge these changes inside our branch.</a>
<ul>
<li><a href="#sec-2-7-1">Return to our branch</a></li>
<li><a href="#sec-2-7-2">Merge the content of master into our branch</a></li>
</ul>
</li>
<li><a href="#sec-2-8">There were conflicts, what do i do?</a>
<ul>
<li><a href="#sec-2-8-1">Why must i merge master into my branch ?</a></li>
<li><a href="#sec-2-8-2">What if master is broken ?</a></li>
</ul>
</li>
<li><a href="#sec-2-9">I've done my dev, what do i do ?</a>
<ul>
<li><a href="#sec-2-9-1">Check these assertions :</a></li>
</ul>
</li>
<li><a href="#sec-2-10">Ok then, it's time to merge into master.</a>
<ul>
<li><a href="#sec-2-10-1">Return to master</a></li>
<li><a href="#sec-2-10-2">To avoid some later merging, check you're up-to-date with master</a></li>
</ul>
</li>
<li><a href="#sec-2-11">Merge the content of the "merging branch" into master</a></li>
<li><a href="#sec-2-12">Send your modifications to master!</a></li>
<li><a href="#sec-2-13">What if there are problems ?</a></li>
<li><a href="#sec-2-14">Now, you're done!!!</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1">Introduction</h2>
<div class="outline-text-2" id="text-1">
<p>
Here is one possible team workflow!
I'm not saying it's the ultimate way and those that do not follow will
burn! Feel free to discuss it and/or patch it!
</p>

<p>
For simplicity's readings, i talk about master as of the final branch
we need to merge into. It's just to simplify and give a name.
You can, of course, translate this by replacing master by a release branch.
</p>
</div>
</div>

<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2">One possible workflow</h2>
<div class="outline-text-2" id="text-2">
</div><div id="outline-container-sec-2-1" class="outline-3">
<h3 id="sec-2-1">Retrieve the repository needed</h3>
</div>
<div id="outline-container-sec-2-2" class="outline-3">
<h3 id="sec-2-2">Clone this repository</h3>
<div class="outline-text-3" id="text-2-2">
</div><div id="outline-container-sec-2-2-1" class="outline-4">
<h4 id="sec-2-2-1">Go to the desired folder to receive the clone of the repository</h4>
<div class="outline-text-4" id="text-2-2-1">
<p>
Exemple :
</p>
<div class="org-src-container">

<pre class="src src-sh">cd ~/repositories/pro/
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-2-2-2" class="outline-4">
<h4 id="sec-2-2-2">Then clone the repository</h4>
<div class="outline-text-4" id="text-2-2-2">
<div class="org-src-container">

<pre class="src src-sh">git clone adress-of-the-repository
</pre>
</div>

<p>
Example:
#+BEGIN<sub>SRC</sub> sh
git clone <a href="https://ardumont@github.com/ardumont/my-org-files.git">https://ardumont@github.com/ardumont/my-org-files.git</a>
#+END<sub>SRC</sub> sh
</p>
</div>
</div>
</div>
<div id="outline-container-sec-2-3" class="outline-3">
<h3 id="sec-2-3">We create a branch from master to develop our fix or our functionality.</h3>
<div class="outline-text-3" id="text-2-3">
<div class="org-src-container">

<pre class="src src-sh">git checkout -b trigram-user/branch-name
</pre>
</div>

<p>
Example :
</p>
<div class="org-src-container">

<pre class="src src-sh">git checkout -b adu/doSomeStuff
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-2-4" class="outline-3">
<h3 id="sec-2-4">You do your dev regularly, add the files and commit.</h3>
<div class="outline-text-3" id="text-2-4">
<p>
The graph will look like something like this:
</p>


<div class="figure">
<p><a href="./resources/git/00.master-branch-without-pull-on-master.png"><img src="./resources/git/00.master-branch-without-pull-on-master.png" alt="00.master-branch-without-pull-on-master.png" /></a>
</p>
</div>
</div>
</div>
<div id="outline-container-sec-2-5" class="outline-3">
<h3 id="sec-2-5">Regularly, return to master to synchronize the source.</h3>
<div class="outline-text-3" id="text-2-5">
<div class="org-src-container">

<pre class="src src-sh"># Return to master
git checkout master
# Synchronize your local repository and your workspace
# with the content of the distant repository
git pull
</pre>
</div>

<p>
If there were some changes inside the remote master (origin/master), the graph will evolve like this:
</p>


<div class="figure">
<p><a href="./resources/git/resources/git/0.master-branch-before-merge.png"><img src="./resources/git/0.master-branch-before-merge.png" alt="0.master-branch-before-merge.png" /></a>
</p>
</div>
</div>
</div>

<div id="outline-container-sec-2-6" class="outline-3">
<h3 id="sec-2-6">Why does git refuse to checkout my branch?</h3>
<div class="outline-text-3" id="text-2-6">
<p>
If it refuses (git explains everything it does and also why it refuses), you may have forgotten one
step. You may, for example, have changes locally that you did not
commit to your index.
</p>

<p>
So, before returning to master, make sure that :
</p>
<ul class="org-ul">
<li>you have commited everything in your index for your branch
</li>
</ul>
<div class="org-src-container">

<pre class="src src-sh">git add the-thing-you-wanna-commit-but-unstable another-thing-to-commit-but-unstable ...
git commit -m "Filthy commit not stable, need to amend it later"
# later, when everything is ok
# git add the-thing-you-wanna-commit-stable \
# another-thing-to-commit-stable ...
# amend the commit
# git commit --amend
</pre>
</div>
<ul class="org-ul">
<li>or dropped it if it is useless to you
</li>
</ul>
<div class="org-src-container">

<pre class="src src-sh">rm the-thing-you-wanna-commit-but-unstable another-thing-to-commit-but-unstable ...
</pre>
</div>
<ul class="org-ul">
<li>or another option, stash it!
</li>
</ul>
<div class="org-src-container">

<pre class="src src-sh">git stash
# and later when everything is ok, just unstash it
# git stash pop
</pre>
</div>

<p>
Remark 2:
These commands are your best friends, ask them to help you out!
</p>

<div class="org-src-container">

<pre class="src src-sh">git status
</pre>
</div>
<p>
and/or
</p>
<div class="org-src-container">

<pre class="src src-sh">gitk --all
</pre>
</div>
<p>
and/or
</p>
<div class="org-src-container">

<pre class="src src-sh">git log
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-2-7" class="outline-3">
<h3 id="sec-2-7">Now, we're synchronized with master, we return to our branch and merge these changes inside our branch.</h3>
<div class="outline-text-3" id="text-2-7">
</div><div id="outline-container-sec-2-7-1" class="outline-4">
<h4 id="sec-2-7-1">Return to our branch</h4>
<div class="outline-text-4" id="text-2-7-1">
<div class="org-src-container">

<pre class="src src-sh">git checkout trigram-user/branch-name
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-2-7-2" class="outline-4">
<h4 id="sec-2-7-2">Merge the content of master into our branch</h4>
<div class="outline-text-4" id="text-2-7-2">
<div class="org-src-container">

<pre class="src src-sh">git merge master
</pre>
</div>

<p>
Everything ok ?
If everything is merging without problems, the graph will look like this:
</p>


<div class="figure">
<p><a href="./resources/git/1.merge-master-into-branch.png"><img src="./resources/git/1.merge-master-into-branch.png" alt="1.merge-master-into-branch.png" /></a>
</p>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-2-8" class="outline-3">
<h3 id="sec-2-8">There were conflicts, what do i do?</h3>
<div class="outline-text-3" id="text-2-8">
<p>
So there were conflits during merge, we must fix these conflicts manually.
</p>

<p>
Either you use the tool git offers you
</p>
<div class="org-src-container">

<pre class="src src-sh">git mergetool
</pre>
</div>
<p>
(I do not detail because i didn't try yet!)
</p>

<p>
Or, you open your favourite editor or ide and choose what you want to keep or not depending on the situation.
When all conflicts are resolved and that all your tests are ok, add
all the files modified to the index, commit and that's all folks!
</p>

<div class="org-src-container">

<pre class="src src-sh">git status
git add yourFileModified yourFile2Modified
git commit
</pre>
</div>

<p>
In either case of conflict or not, the branch will look like
previously.
</p>
</div>
<div id="outline-container-sec-2-8-1" class="outline-4">
<h4 id="sec-2-8-1">Why must i merge master into my branch ?</h4>
<div class="outline-text-4" id="text-2-8-1">
</div><ul class="org-ul"><li><a id="sec-2-8-1-1" name="sec-2-8-1-1"></a>To make sure that what you're doing is still compatible with the latest code!<br  /></li>
<li><a id="sec-2-8-1-2" name="sec-2-8-1-2"></a>If you do not, you may break the code from master when you merge your fix or dev of the branch into master! It's what i think can protect the master!<br  /></li></ul>
</div>
<div id="outline-container-sec-2-8-2" class="outline-4">
<h4 id="sec-2-8-2">What if master is broken ?</h4>
<div class="outline-text-4" id="text-2-8-2">
</div><ul class="org-ul"><li><a id="sec-2-8-2-1" name="sec-2-8-2-1"></a>It depends on the policy of your project.<br  /></li>
<li><a id="sec-2-8-2-2" name="sec-2-8-2-2"></a>If your policy is "Every commit is stable (all tests ok)" then it's not possible&#x2026; or not!<br  /><ul class="org-ul"><li><a id="sec-2-8-2-2-1" name="sec-2-8-2-2-1"></a>Very strong assertion : Master must be stable! (It is mine!)<br  /><ul class="org-ul"><li><a id="sec-2-8-2-2-1-1" name="sec-2-8-2-2-1-1"></a>How can we be sure of such assertion ?<br  /><ul class="org-ul"><li><a id="sec-2-8-2-2-1-1-1" name="sec-2-8-2-2-1-1-1"></a>Continous integration !<br  /></li>
<li><a id="sec-2-8-2-2-1-1-2" name="sec-2-8-2-2-1-1-2"></a>Code review tool such as Gerrit!<br  /></li></ul>
</li></ul>
</li></ul>
</li></ul>
</div>
</div>
<div id="outline-container-sec-2-9" class="outline-3">
<h3 id="sec-2-9">I've done my dev, what do i do ?</h3>
<div class="outline-text-3" id="text-2-9">
</div><div id="outline-container-sec-2-9-1" class="outline-4">
<h4 id="sec-2-9-1">Check these assertions :</h4>
<div class="outline-text-4" id="text-2-9-1">
</div><ul class="org-ul"><li><a id="sec-2-9-1-1" name="sec-2-9-1-1"></a>Is all your code commited to your branch?<br  /></li>
<li><a id="sec-2-9-1-2" name="sec-2-9-1-2"></a>Is your dev done?<br  /></li>
<li><a id="sec-2-9-1-3" name="sec-2-9-1-3"></a>Are all your unit-tests ok?<br  /></li>
<li><a id="sec-2-9-1-4" name="sec-2-9-1-4"></a>Are all your functional-tests or integration-tests ok?<br  /></li>
<li><a id="sec-2-9-1-5" name="sec-2-9-1-5"></a>Does your app deploy and work as expected?<br  /></li></ul>
</div>
</div>
<div id="outline-container-sec-2-10" class="outline-3">
<h3 id="sec-2-10">Ok then, it's time to merge into master.</h3>
<div class="outline-text-3" id="text-2-10">
</div><div id="outline-container-sec-2-10-1" class="outline-4">
<h4 id="sec-2-10-1">Return to master</h4>
<div class="outline-text-4" id="text-2-10-1">
<div class="org-src-container">

<pre class="src src-sh">git checkout master
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-2-10-2" class="outline-4">
<h4 id="sec-2-10-2">To avoid some later merging, check you're up-to-date with master</h4>
<div class="outline-text-4" id="text-2-10-2">
<div class="org-src-container">

<pre class="src src-sh">git pull
</pre>
</div>
<p>
If everything is already up-to-date, then pass to the next step.
Else, return to the previous step of merging master into your branch.
</p>
</div>
</div>
</div>
<div id="outline-container-sec-2-11" class="outline-3">
<h3 id="sec-2-11">Merge the content of the "merging branch" into master</h3>
<div class="outline-text-3" id="text-2-11">
<div class="org-src-container">

<pre class="src src-sh">git merge trigram-user/branch-name
</pre>
</div>
<p>
At this point, it will only do a fast forward, that's just a moving
forward the master pointer to the last commit of your branch (because
your master branch did not advance between your checkout and the merge
command).
</p>

<p>
So the graph will look like this:
</p>


<div class="figure">
<p><a href="./resources/git/2.master-branch-after-second-merge-branchA-into-master.png"><img src="./resources/git/2.master-branch-after-second-merge-branchA-into-master.png" alt="2.master-branch-after-second-merge-branchA-into-master.png" /></a>
</p>
</div>
</div>
</div>
<div id="outline-container-sec-2-12" class="outline-3">
<h3 id="sec-2-12">Send your modifications to master!</h3>
<div class="outline-text-3" id="text-2-12">
<div class="org-src-container">

<pre class="src src-sh">git push
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-2-13" class="outline-3">
<h3 id="sec-2-13">What if there are problems ?</h3>
<div class="outline-text-3" id="text-2-13">
<p>
It's not a real problem, it just means "somebody, somebody put something in your drink"!
It means really that someone pushed something before you did finish
your merge.
</p>

<p>
You must once again merge. But this time, it will be fast.
As your branch and the master are already merged, when you will pull
some code, git will automagically merge what it can from master and
leave you eventuals conflicts to resolve.
</p>

<div class="org-src-container">

<pre class="src src-sh"># synchronize with everybody... (needs somebody to love!)
git pull
# fix eventual merge conflicts and check your tests
# add the merged files to the index (git add)
# and commit (git commit)
git push
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-2-14" class="outline-3">
<h3 id="sec-2-14">Now, you're done!!!</h3>
<div class="outline-text-3" id="text-2-14">
<p>
#+./resources/git/00.master-branch-without-pull-on-master.png <img src="http://adumont.fr/blog/wp-content/uploads/2012/12/wpid-00.master-branch-without-pull-on-master.png" alt="wpid-00.master-branch-without-pull-on-master.png" />
#+./resources/git/resources/git/0.master-branch-before-merge.png"&gt;&lt;img src="./resources/git/0.master-branch-before-merge.png" alt="0.master-branch-before-merge.png <img src="http://adumont.fr/blog/wp-content/uploads/2012/12/wpid-0.master-branch-before-merge.png-alt0.master-branch-before-merge.png" alt="wpid-0.master-branch-before-merge.png-alt0.master-branch-before-merge.png" />
#+./resources/git/1.merge-master-into-branch.png <img src="http://adumont.fr/blog/wp-content/uploads/2012/12/wpid-1.merge-master-into-branch.png" alt="wpid-1.merge-master-into-branch.png" />
#+./resources/git/2.master-branch-after-second-merge-branchA-into-master.png <img src="http://adumont.fr/blog/wp-content/uploads/2012/12/wpid-2.master-branch-after-second-merge-branchA-into-master.png" alt="wpid-2.master-branch-after-second-merge-branchA-into-master.png" />
</p>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="date">Date: <span class="timestamp-wrapper"><span class="timestamp">[2012-12-22 Sat 14:20]</span></span></p>
<p class="author">Author: Antoine R. Dumont</p>
<p class="date">Created: 2014-12-01 Mon 23:46</p>
<p class="creator"><a href="http://www.gnu.org/software/emacs/">Emacs</a> 24.4.1 (<a href="http://orgmode.org">Org</a> mode 8.2.10)</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
