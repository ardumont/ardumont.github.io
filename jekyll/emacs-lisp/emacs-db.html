<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">Install</a></li>
<li><a href="#sec-2">Code</a></li>
</ul>
</div>
</div>

<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1">Install</h2>
<div class="outline-text-2" id="text-1">
<div class="org-src-container">

<pre class="src src-sh">M-x package-install db
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2">Code</h2>
<div class="outline-text-2" id="text-2">
<div class="org-src-container">

<pre class="src src-elisp">(require 'db)

;; prepare the cache
(make-directory "/tmp/cache/")

;; Create the db
(setq my-db
  (db-make
   `(db-hash
     :filename ,(format "/tmp/cache/some-file"))))

;; Install data in database
(db-put "001" '(("a" . 10)("b" . 20)) my-db)
(db-put "002" '(("a" . 17)("b" . "hello")("xyz" . "well!")) my-db)
;; We can overwrite already existing data on key
(db-put "002" 1 my-db)

(db-get "002" my-db)

;; map over all the records from the database
(db-map (lambda (key db-value)
	  (message "key: %s\nvalue:%s" key db-value))
	my-db)

;; filter on key '002'.
(db-map (lambda (key db-value) (when (string= key "002") db-value)) my-db nil t)

(let ((db (db-make '(db-hash))))
  (db-put "test001"
	  '(("username" . "test001")
	    ("title" . "Miss")
	    ("surname" . "Test")) db)
  (db-put "test002"
	  '(("username" . "test002")
	    ("title" . "Mr")
	    ("surname" . "Test")) db)
  '(("test001"
     ("username" . "test001")
     ("title" . "Miss")
     ("surname" . "Test")))
  (db-query db '(= "username" "test001")))
</pre>
</div>
</div>
</div>
