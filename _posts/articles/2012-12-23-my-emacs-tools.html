---
layout: post
title: My emacs tools
date: 2012-12-23
categories:
- emacs
- emacs-live
- emacs-starter-kit
- tools
author: Antoine R. Dumont
excerpt: Just explaining my progression using emacs, first emacs-starter-kit, then emacs-live.
---
<p>
<a href="http://www.gnu.org/software/emacs/">Emacs</a> is powerful and can be daunting at first.
</p>

<p>
But, in this world, you come across very interesting people that share this idealistic vision: search for the ultimate free knowledge and share it.
</p>

<p>
Among them, there are those who understood the power of emacs and tried and succeeded in setuping it.
</p>

<p>
They made this setup generic enough to be able to share it:
</p>
<ul class="org-ul">
<li><a href="https://github.com/technomancy/emacs-starter-kit">emacs-starter-kit</a>
</li>
<li><a href="https://github.com/overtone/emacs-live">emacs-live</a>
</li>
</ul>

<p>
Of course, i point only 2 projects (aggregates of others emacs project too).
To see a ever more growing list, you can in emacs, <b>M-x package-list-packages</b> to see a good portion of those people (through their most excellent project) :D
</p>

<p>
Anyway, my point is one of those project can help you rapidly become an emacs user.
</p>

<p>
If you're interested, in this post, i will explain my experiences in setuping those 2 projects, not how to use them.
</p>

<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1"><a href="https://github.com/technomancy/emacs-starter-kit">emacs-starter-kit</a></h2>
<div class="outline-text-2" id="text-1">
</div><div id="outline-container-sec-1-1" class="outline-3">
<h3 id="sec-1-1">beginning</h3>
<div class="outline-text-3" id="text-1-1">
<p>
<a href="https://github.com/technomancy/emacs-starter-kit">emacs-starter-kit</a> helped me at first to rapidly made some development done in <a href="http://clojure.org">clojure</a>, <a href="http://orgmode.org/">org-mode</a>, <a href="http://www.gnu.org/software/emacs/manual/html_mono/elisp.html">emacs-lisp</a>, empowered through <a href="https://github.com/magit/magit">magit</a>.
</p>
</div>
</div>

<div id="outline-container-sec-1-2" class="outline-3">
<h3 id="sec-1-2">bootstrap snippet</h3>
<div class="outline-text-3" id="text-1-2">
<p>
Here is a snippet of code to bootstrap :
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #8b0000;">(</span><span style="color: #FBDE2D; font-weight: bold;">require</span> '<span style="color: #4c83ff; font-weight: bold;">package</span><span style="color: #8b0000;">)</span>
<span style="color: #8b0000;">(</span>add-to-list 'package-archives
             '<span style="color: #006400;">(</span><span style="color: #61CE3C;">"marmalade"</span> . <span style="color: #61CE3C;">"http://marmalade-repo.org/packages/"</span><span style="color: #006400;">)</span> t<span style="color: #8b0000;">)</span>
<span style="color: #8b0000;">(</span>package-initialize<span style="color: #8b0000;">)</span>

<span style="color: #8b0000;">(</span><span style="color: #FBDE2D; font-weight: bold;">when</span> <span style="color: #006400;">(</span>not package-archive-contents<span style="color: #006400;">)</span>
  <span style="color: #006400;">(</span>package-refresh-contents<span style="color: #006400;">)</span><span style="color: #8b0000;">)</span>

<span style="color: #586e75;">;; </span><span style="color: #8B8989; font-style: italic;">Add in your own as you wish:</span>
<span style="color: #8b0000;">(</span><span style="color: #FBDE2D; font-weight: bold;">defvar</span> <span style="color: #D8FA3C;">my-packages</span> '<span style="color: #006400;">(</span>starter-kit starter-kit-lisp starter-kit-bindings org magi<span style="color: #dc8cc3; background-color: #383838;">t</span><span style="color: #006400; background-color: #383838;">)</span>
  <span style="color: #2aa198;">"A list of packages to ensure are installed at launch."</span><span style="color: #8b0000;">)</span>

<span style="color: #8b0000;">(</span><span style="color: #FBDE2D; font-weight: bold;">dolist</span> <span style="color: #006400;">(</span>p my-packages<span style="color: #006400;">)</span>
  <span style="color: #006400;">(</span><span style="color: #FBDE2D; font-weight: bold;">when</span> <span style="color: #ff1493;">(</span>not <span style="color: #ffff00;">(</span>package-installed-p p<span style="color: #ffff00;">)</span><span style="color: #ff1493;">)</span>
    <span style="color: #ff1493;">(</span>package-install p<span style="color: #ff1493;">)</span><span style="color: #006400;">)</span><span style="color: #8b0000;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-3" class="outline-3">
<h3 id="sec-1-3">My setup over time</h3>
<div class="outline-text-3" id="text-1-3">
<p>
Then came along the modifications that kept on pushing the limit of the <b>init.el</b>.
</p>

<p>
But, at the time, i did not yet search to make rigorous setup in <a href="http://www.gnu.org/software/emacs/manual/html_mono/elisp.html">emacs-lisp</a>, i did not have time yet.
</p>

<p>
So, my setup grew anarchically over time (with sections in one file&#x2026;)
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #586e75;">;; </span><span style="color: #8B8989; font-style: italic;">User pack init file</span>
<span style="color: #586e75;">;;</span>
<span style="color: #586e75;">;; </span><span style="color: #8B8989; font-style: italic;">User this file to initiate the pack configuration.</span>
<span style="color: #586e75;">;; </span><span style="color: #8B8989; font-style: italic;">See README for more information.</span>

<span style="color: #586e75;">;; </span><span style="color: #8B8989; font-style: italic;">workaround for launching emacs from the stumpwm path</span>
<span style="color: #586e75;">;; </span><span style="color: #8B8989; font-style: italic;">this will permit the starting of lein (which is in /home/tony/bin)</span>
<span style="color: #8b0000;">(</span>setenv <span style="color: #61CE3C;">"PATH"</span> <span style="color: #006400;">(</span>concat <span style="color: #61CE3C;">"/home/tony/bin:"</span> <span style="color: #ff1493;">(</span>getenv <span style="color: #61CE3C;">"PATH"</span><span style="color: #ff1493;">)</span><span style="color: #006400;">)</span><span style="color: #8b0000;">)</span>

<span style="color: #586e75;">;; </span><span style="color: #8B8989; font-style: italic;">starter-kit snippets of code imported brutally after the default one (from em</span><span style="color: #dc8cc3; background-color: #383838; font-style: italic;">acs-live's init.el)</span>

<span style="color: #8b0000;">(</span><span style="color: #FBDE2D; font-weight: bold;">require</span> '<span style="color: #4c83ff; font-weight: bold;">package</span><span style="color: #8b0000;">)</span>
<span style="color: #8b0000;">(</span>add-to-list 'package-archives
             '<span style="color: #006400;">(</span><span style="color: #61CE3C;">"marmalade"</span> . <span style="color: #61CE3C;">"http://marmalade-repo.org/packages/"</span><span style="color: #006400;">)</span> t<span style="color: #8b0000;">)</span>
<span style="color: #8b0000;">(</span>package-initialize<span style="color: #8b0000;">)</span>

<span style="color: #8b0000;">(</span><span style="color: #FBDE2D; font-weight: bold;">when</span> <span style="color: #006400;">(</span>not package-archive-contents<span style="color: #006400;">)</span>
  <span style="color: #006400;">(</span>package-refresh-contents<span style="color: #006400;">)</span><span style="color: #8b0000;">)</span>

<span style="color: #8b0000;">(</span><span style="color: #FBDE2D; font-weight: bold;">defvar</span> <span style="color: #D8FA3C;">my-packages</span> '<span style="color: #006400;">(</span>starter-kit starter-kit-lisp starter-kit-js starter-kit-ru<span style="color: #dc8cc3; background-color: #383838;">by starter-kit-eshell clojure-mode clojure-test-mode multi-term switch-window slime slime-repl ediff org flymake-shell graphviz-dot-mode auto-complete cljdoc fold-dwim htmlize</span><span style="color: #006400; background-color: #383838;">)</span>
  <span style="color: #2aa198;">"A list of packages to ensure are installed at launch."</span><span style="color: #8b0000;">)</span>

<span style="color: #8b0000;">(</span><span style="color: #FBDE2D; font-weight: bold;">dolist</span> <span style="color: #006400;">(</span>p my-packages<span style="color: #006400;">)</span>
  <span style="color: #006400;">(</span><span style="color: #FBDE2D; font-weight: bold;">when</span> <span style="color: #ff1493;">(</span>not <span style="color: #ffff00;">(</span>package-installed-p p<span style="color: #ffff00;">)</span><span style="color: #ff1493;">)</span>
    <span style="color: #ff1493;">(</span>package-install p<span style="color: #ff1493;">)</span><span style="color: #006400;">)</span><span style="color: #8b0000;">)</span>

<span style="color: #586e75;">;; </span><span style="color: #8B8989; font-style: italic;">common-lisp setup</span>

<span style="color: #8b0000;">(</span>setq inferior-lisp-program <span style="color: #61CE3C;">"/usr/bin/clisp"</span><span style="color: #8b0000;">)</span>
<span style="color: #586e75;">;; </span><span style="color: #8B8989; font-style: italic;">(add-to-list &#8217;load-path "/home/tony/.emacs.d/elpa/slime-20100404.1/")</span>
<span style="color: #586e75;">;; </span><span style="color: #8B8989; font-style: italic;">(require &#8217;slime-autoloads)</span>
<span style="color: #586e75;">;; </span><span style="color: #8B8989; font-style: italic;">(slime-setup)</span>

<span style="color: #586e75;">;; </span><span style="color: #8B8989; font-style: italic;">some multi term tweaks</span>
<span style="color: #8b0000;">(</span><span style="color: #FBDE2D; font-weight: bold;">require</span> '<span style="color: #4c83ff; font-weight: bold;">multi-term</span><span style="color: #8b0000;">)</span>
<span style="color: #8b0000;">(</span>global-set-key <span style="color: #006400;">(</span>kbd <span style="color: #61CE3C;">"C-c C-j"</span><span style="color: #006400;">)</span> 'term-line-mode<span style="color: #8b0000;">)</span>

<span style="color: #586e75;">;; </span><span style="color: #8B8989; font-style: italic;">some text/font/color tweaks</span>

<span style="color: #8b0000;">(</span>setq-default fill-column 120<span style="color: #8b0000;">)</span>
<span style="color: #8b0000;">(</span>set-face-background 'default <span style="color: #61CE3C;">"</span><span style="color: #ffffff; background-color: #000000;">black</span><span style="color: #61CE3C;">"</span><span style="color: #8b0000;">)</span>

<span style="color: #586e75;">;; </span><span style="color: #8B8989; font-style: italic;">auto complete</span>

<span style="color: #8b0000;">(</span>add-to-list 'ac-dictionary-directories <span style="color: #61CE3C;">"~/.emacs.d/elpa/auto-complete-1.4/dict"</span><span style="color: #8b0000; background-color: #383838;">)</span>
<span style="color: #8b0000;">(</span><span style="color: #FBDE2D; font-weight: bold;">require</span> '<span style="color: #4c83ff; font-weight: bold;">auto-complete-config</span><span style="color: #8b0000;">)</span>
<span style="color: #8b0000;">(</span>ac-config-default<span style="color: #8b0000;">)</span>

<span style="color: #8b0000;">(</span>set-language-environment <span style="color: #61CE3C;">"UTF-8"</span><span style="color: #8b0000;">)</span>

<span style="color: #586e75;">;; </span><span style="color: #8B8989; font-style: italic;">clojure-mode setup</span>

<span style="color: #8b0000;">(</span><span style="color: #FBDE2D; font-weight: bold;">require</span> '<span style="color: #4c83ff; font-weight: bold;">clojure-mode</span><span style="color: #8b0000;">)</span>

<span style="color: #8b0000;">(</span>add-to-list 'auto-mode-alist '<span style="color: #006400;">(</span><span style="color: #61CE3C;">"\.cljs$"</span> . clojure-mode<span style="color: #006400;">)</span><span style="color: #8b0000;">)</span>

<span style="color: #8b0000;">(</span>add-hook 'clojure-mode-hook <span style="color: #006400;">(</span><span style="color: #FBDE2D; font-weight: bold;">lambda</span> <span style="color: #ff1493;">()</span> <span style="color: #ff1493;">(</span>paredit-mode +1<span style="color: #ff1493;">)</span><span style="color: #006400;">)</span><span style="color: #8b0000;">)</span>

<span style="color: #586e75;">;; </span><span style="color: #8B8989; font-style: italic;">slime repl setup</span>

<span style="color: #586e75;">; </span><span style="color: #8B8989; font-style: italic;">add color into the repl via clojure-jack-in</span>
<span style="color: #8b0000;">(</span>add-hook 'slime-repl-mode-hook
         <span style="color: #006400;">(</span><span style="color: #FBDE2D; font-weight: bold;">defun</span> <span style="color: #ff1493;">clojure-mode-slime-font-lock</span> <span style="color: #ff1493;">()</span>
           <span style="color: #ff1493;">(</span><span style="color: #FBDE2D; font-weight: bold;">let</span> <span style="color: #ffff00;">(</span>font-lock-mode<span style="color: #ffff00;">)</span>
             <span style="color: #ffff00;">(</span>clojure-mode-font-lock-setup<span style="color: #ffff00;">)</span><span style="color: #ff1493;">)</span><span style="color: #006400;">)</span><span style="color: #8b0000;">)</span>

<span style="color: #8b0000;">(</span>add-hook 'slime-repl-mode-hook <span style="color: #006400;">(</span><span style="color: #FBDE2D; font-weight: bold;">lambda</span> <span style="color: #ff1493;">()</span> <span style="color: #ff1493;">(</span>paredit-mode +1<span style="color: #ff1493;">)</span><span style="color: #006400;">)</span><span style="color: #8b0000;">)</span>

<span style="color: #8b0000;">(</span>setq slime-net-coding-system 'utf-8-unix<span style="color: #8b0000;">)</span>

<span style="color: #586e75;">;; </span><span style="color: #8B8989; font-style: italic;">nrepl setup</span>
<span style="color: #8b0000;">(</span>add-hook 'nrepl-mode-hook <span style="color: #006400;">(</span><span style="color: #FBDE2D; font-weight: bold;">lambda</span> <span style="color: #ff1493;">()</span> <span style="color: #ff1493;">(</span>paredit-mode +1<span style="color: #ff1493;">)</span><span style="color: #006400;">)</span><span style="color: #8b0000;">)</span>

<span style="color: #586e75;">;; </span><span style="color: #8B8989; font-style: italic;">some personal functions that extends the one loaded from user.el</span>

<span style="color: #8b0000;">(</span><span style="color: #FBDE2D; font-weight: bold;">defun</span> <span style="color: #ff1493;">exists-session-or-spawn-it</span> <span style="color: #006400;">(</span>session-name session-command<span style="color: #006400;">)</span>
  <span style="color: #2aa198;">"Given a session-name, check the existence of such a session. If it doesn't ex</span><span style="color: #dc8cc3; background-color: #383838;">ist, spawn the session via the command session-command"</span>
  <span style="color: #006400;">(</span><span style="color: #FBDE2D; font-weight: bold;">let</span> <span style="color: #ff1493;">(</span><span style="color: #ffff00;">(</span>proc <span style="color: #00ff00;">(</span>get-buffer-process session-name<span style="color: #00ff00;">)</span><span style="color: #ffff00;">)</span><span style="color: #ff1493;">)</span>
    <span style="color: #ff1493;">(</span><span style="color: #FBDE2D; font-weight: bold;">unless</span> <span style="color: #ffff00;">(</span>and proc <span style="color: #00ff00;">(</span>eq <span style="color: #add8e6;">(</span>process-status proc<span style="color: #add8e6;">)</span> 'run<span style="color: #00ff00;">)</span><span style="color: #ffff00;">)</span>
      <span style="color: #ffff00;">(</span>funcall session-command<span style="color: #ffff00;">)</span><span style="color: #ff1493;">)</span><span style="color: #006400;">)</span><span style="color: #8b0000;">)</span>

<span style="color: #8b0000;">(</span><span style="color: #FBDE2D; font-weight: bold;">defun</span> <span style="color: #ff1493;">switch-to-buffer-or-nothing</span> <span style="color: #006400;">(</span>process-name buffer-name<span style="color: #006400;">)</span>
  <span style="color: #2aa198;">"Given a process name, switch to the corresponding buffer-name if the process </span><span style="color: #dc8cc3; background-color: #383838;">is running or does nothing."</span>
  <span style="color: #006400;">(</span><span style="color: #FBDE2D; font-weight: bold;">unless</span> <span style="color: #ff1493;">(</span>string= <span style="color: #ffff00;">(</span>buffer-name<span style="color: #ffff00;">)</span> buffer-name<span style="color: #ff1493;">)</span>
    <span style="color: #ff1493;">(</span><span style="color: #FBDE2D; font-weight: bold;">let</span> <span style="color: #ffff00;">(</span><span style="color: #00ff00;">(</span>proc <span style="color: #add8e6;">(</span>get-buffer-process process-name<span style="color: #add8e6;">)</span><span style="color: #00ff00;">)</span><span style="color: #ffff00;">)</span>
      <span style="color: #ffff00;">(</span><span style="color: #FBDE2D; font-weight: bold;">if</span> <span style="color: #00ff00;">(</span>and proc <span style="color: #add8e6;">(</span>eq <span style="color: #ffa500;">(</span>process-status proc<span style="color: #ffa500;">)</span> 'run<span style="color: #add8e6;">)</span><span style="color: #00ff00;">)</span>
          <span style="color: #00ff00;">(</span>switch-to-buffer-other-window buffer-name<span style="color: #00ff00;">)</span><span style="color: #ffff00;">)</span><span style="color: #ff1493;">)</span><span style="color: #006400;">)</span><span style="color: #8b0000;">)</span>

<span style="color: #586e75;">;; </span><span style="color: #8B8989; font-style: italic;">examples</span>
<span style="color: #586e75;">;; </span><span style="color: #8B8989; font-style: italic;">(switch-to-buffer-or-nothing "*swank*" "*slime-repl nil*")    ;; clojure-jack</span><span style="color: #dc8cc3; background-color: #383838; font-style: italic;">-in</span>
<span style="color: #586e75;">;; </span><span style="color: #8B8989; font-style: italic;">(switch-to-buffer-or-nothing "*terminal&lt;1&gt;*" "*terminal&lt;1&gt;*") ;; multi-term</span>

<span style="color: #8b0000;">(</span><span style="color: #FBDE2D; font-weight: bold;">defun</span> <span style="color: #ff1493;">multi-term-once</span> <span style="color: #006400;">()</span>
  <span style="color: #2aa198;">"Check the existence of a terminal with multi-term.</span>
<span style="color: #2aa198;">If it doesn't exist, launch it. Then go to this buffer in another buffer."</span>
  <span style="color: #006400;">(</span>interactive<span style="color: #006400;">)</span>
  <span style="color: #006400;">(</span><span style="color: #FBDE2D; font-weight: bold;">unless</span> <span style="color: #ff1493;">(</span>exists-session-or-spawn-it <span style="color: #61CE3C;">"*terminal&lt;1&gt;*"</span> 'multi-term<span style="color: #ff1493;">)</span>
    <span style="color: #ff1493;">(</span>switch-to-buffer-or-nothing <span style="color: #61CE3C;">"*terminal&lt;1&gt;*"</span> <span style="color: #61CE3C;">"*terminal&lt;1&gt;*"</span><span style="color: #ff1493;">)</span><span style="color: #006400;">)</span><span style="color: #8b0000;">)</span>

<span style="color: #8b0000;">(</span><span style="color: #FBDE2D; font-weight: bold;">defun</span> <span style="color: #ff1493;">jack-in-once</span> <span style="color: #006400;">()</span>
  <span style="color: #2aa198;">"Check the existence of a repl session (nrepl or slime). If it doesn't exist, </span><span style="color: #dc8cc3; background-color: #383838;">launch it."</span>
  <span style="color: #006400;">(</span>interactive<span style="color: #006400;">)</span>
  <span style="color: #006400;">(</span>exists-session-or-spawn-it <span style="color: #61CE3C;">"*nrepl-server*"</span> <span style="color: #ff1493;">(</span><span style="color: #FBDE2D; font-weight: bold;">lambda</span> <span style="color: #ffff00;">()</span> <span style="color: #ffff00;">(</span>nrepl-jack-in nil<span style="color: #ffff00;">)</span><span style="color: #ff1493;">)</span><span style="color: #006400;">)</span><span style="color: #8b0000;">)</span>

<span style="color: #586e75;">;;   </span><span style="color: #8B8989; font-style: italic;">(exists-session-or-spawn-it "*swank*" 'clojure-jack-in)</span>

<span style="color: #586e75;">;; </span><span style="color: #8B8989; font-style: italic;">other bindings that uses personal functions</span>

<span style="color: #8b0000;">(</span>global-set-key <span style="color: #006400;">(</span>kbd <span style="color: #61CE3C;">"C-c C-z"</span><span style="color: #006400;">)</span> 'multi-term-once<span style="color: #8b0000;">)</span>
<span style="color: #8b0000;">(</span>add-hook 'clojure-mode-hook 'jack-in-once<span style="color: #8b0000;">)</span>

<span style="color: #586e75;">;; </span><span style="color: #8B8989; font-style: italic;">Some org-mode setup</span>

<span style="color: #8b0000;">(</span>column-number-mode<span style="color: #8b0000;">)</span>

<span style="color: #8b0000;">(</span>setq org-directory <span style="color: #61CE3C;">"~/org"</span><span style="color: #8b0000;">)</span>

<span style="color: #8b0000;">(</span>setq org-startup-indented t<span style="color: #8b0000;">)</span>

<span style="color: #8b0000;">(</span>setq org-log-done 'time<span style="color: #8b0000;">)</span>

<span style="color: #8b0000;">(</span>setq org-default-notes-file <span style="color: #006400;">(</span>concat org-directory <span style="color: #61CE3C;">"/notes.org"</span><span style="color: #006400;">)</span><span style="color: #8b0000;">)</span>

<span style="color: #8b0000;">(</span>define-key global-map <span style="color: #61CE3C;">"\C-cc"</span> 'org-capture<span style="color: #8b0000;">)</span>

<span style="color: #8b0000;">(</span>setq org-tag-alist '<span style="color: #006400;">(</span><span style="color: #ff1493;">(</span><span style="color: #61CE3C;">"howTo"</span> . ?h<span style="color: #ff1493;">)</span>
                      <span style="color: #ff1493;">(</span><span style="color: #61CE3C;">"tech"</span> . ?t<span style="color: #ff1493;">)</span>
                      <span style="color: #ff1493;">(</span><span style="color: #61CE3C;">"emacs"</span> . ?e<span style="color: #ff1493;">)</span>
                      <span style="color: #ff1493;">(</span><span style="color: #61CE3C;">"orgMode"</span> . ?o<span style="color: #ff1493;">)</span>
                      <span style="color: #ff1493;">(</span><span style="color: #61CE3C;">"faq"</span> . ?f<span style="color: #ff1493;">)</span>
                      <span style="color: #ff1493;">(</span><span style="color: #61CE3C;">"firefox"</span><span style="color: #ff1493;">)</span>
                      <span style="color: #ff1493;">(</span><span style="color: #61CE3C;">"conkeror"</span><span style="color: #ff1493;">)</span>
                      <span style="color: #ff1493;">(</span><span style="color: #61CE3C;">"linux"</span><span style="color: #ff1493;">)</span><span style="color: #006400;">)</span><span style="color: #8b0000;">)</span>

<span style="color: #8b0000;">(</span>setq org-todo-keywords
   '<span style="color: #006400;">(</span><span style="color: #ff1493;">(</span>sequence <span style="color: #61CE3C;">"TODO"</span> <span style="color: #61CE3C;">"IN-PROGRESS"</span> <span style="color: #61CE3C;">"PENDING"</span> <span style="color: #61CE3C;">"|"</span>  <span style="color: #61CE3C;">"DONE"</span> <span style="color: #61CE3C;">"FAIL"</span> <span style="color: #61CE3C;">"DELEGATED"</span> <span style="color: #61CE3C;">"CA</span><span style="color: #dc8cc3; background-color: #383838;">NCELLED"</span><span style="color: #ff1493; background-color: #383838;">)</span><span style="color: #006400; background-color: #383838;">)</span><span style="color: #8b0000; background-color: #383838;">)</span>

<span style="color: #586e75;">;; </span><span style="color: #8B8989; font-style: italic;">To show/hide block of code</span>

<span style="color: #8b0000;">(</span><span style="color: #FBDE2D; font-weight: bold;">require</span> '<span style="color: #4c83ff; font-weight: bold;">fold-dwim</span><span style="color: #8b0000;">)</span>
<span style="color: #8b0000;">(</span>global-set-key <span style="color: #006400;">(</span>kbd <span style="color: #61CE3C;">"C-c j"</span><span style="color: #006400;">)</span> 'fold-dwim-toggle<span style="color: #8b0000;">)</span>
<span style="color: #8b0000;">(</span>global-set-key <span style="color: #006400;">(</span>kbd <span style="color: #61CE3C;">"C-c l"</span><span style="color: #006400;">)</span> 'fold-dwim-hide-all<span style="color: #8b0000;">)</span>
<span style="color: #8b0000;">(</span>global-set-key <span style="color: #006400;">(</span>kbd <span style="color: #61CE3C;">"C-c ;"</span><span style="color: #006400;">)</span> 'fold-dwim-show-all<span style="color: #8b0000;">)</span>

<span style="color: #586e75;">;; </span><span style="color: #8B8989; font-style: italic;">C-x C-l to lower case ; C-x C-u to upper case</span>

<span style="color: #8b0000;">(</span>put 'downcase-region 'disabled nil<span style="color: #8b0000;">)</span>
<span style="color: #8b0000;">(</span>put 'upcase-region 'disabled nil<span style="color: #8b0000;">)</span>

<span style="color: #586e75;">;; </span><span style="color: #8B8989; font-style: italic;">Find file in project</span>

<span style="color: #8b0000;">(</span>eval-after-load 'find-file-in-project
  '<span style="color: #006400;">(</span><span style="color: #FBDE2D; font-weight: bold;">progn</span>
     <span style="color: #586e75;">;; </span><span style="color: #8B8989; font-style: italic;">add 'entreprise' files patterns (cough!)</span>
     <span style="color: #ff1493;">(</span>setq ffip-patterns
           <span style="color: #ffff00;">(</span>append ffip-patterns
                   '<span style="color: #00ff00;">(</span><span style="color: #61CE3C;">"*.cs*""*.htm*"</span> <span style="color: #61CE3C;">"*.java"</span> <span style="color: #61CE3C;">"*.js*"</span> <span style="color: #61CE3C;">"*.php"</span>
                     <span style="color: #61CE3C;">"*.properties"</span> <span style="color: #61CE3C;">"*.sql"</span> <span style="color: #61CE3C;">"*.xml"</span> <span style="color: #61CE3C;">"*.clj*"</span><span style="color: #00ff00;">)</span><span style="color: #ffff00;">)</span><span style="color: #ff1493;">)</span>
     <span style="color: #586e75;">;; </span><span style="color: #8B8989; font-style: italic;">increase the max number of files, otherwise some files will be</span>
     <span style="color: #586e75;">;; </span><span style="color: #8B8989; font-style: italic;">'unfindable' on big projects</span>
     <span style="color: #ff1493;">(</span>setq ffip-limit 8192<span style="color: #ff1493;">)</span><span style="color: #006400;">)</span><span style="color: #8b0000;">)</span>

<span style="color: #586e75;">;; </span><span style="color: #8B8989; font-style: italic;">etags</span>

<span style="color: #8b0000;">(</span><span style="color: #FBDE2D; font-weight: bold;">require</span> '<span style="color: #4c83ff; font-weight: bold;">etags</span><span style="color: #8b0000;">)</span>

<span style="color: #8b0000;">(</span><span style="color: #FBDE2D; font-weight: bold;">defun</span> <span style="color: #ff1493;">ido-find-tag</span> <span style="color: #006400;">()</span>
  <span style="color: #2aa198;">"Find a tag using ido"</span>
  <span style="color: #006400;">(</span>interactive<span style="color: #006400;">)</span>
  <span style="color: #006400;">(</span>tags-completion-table<span style="color: #006400;">)</span>
  <span style="color: #006400;">(</span><span style="color: #FBDE2D; font-weight: bold;">let</span> <span style="color: #ff1493;">(</span>tag-names<span style="color: #ff1493;">)</span>
    <span style="color: #ff1493;">(</span>mapc <span style="color: #ffff00;">(</span><span style="color: #FBDE2D; font-weight: bold;">lambda</span> <span style="color: #00ff00;">(</span>x<span style="color: #00ff00;">)</span>
            <span style="color: #00ff00;">(</span><span style="color: #FBDE2D; font-weight: bold;">unless</span> <span style="color: #add8e6;">(</span>integerp x<span style="color: #add8e6;">)</span>
              <span style="color: #add8e6;">(</span>push <span style="color: #ffa500;">(</span>prin1-to-string x t<span style="color: #ffa500;">)</span> tag-names<span style="color: #add8e6;">)</span><span style="color: #00ff00;">)</span><span style="color: #ffff00;">)</span>
          tags-completion-table<span style="color: #ff1493;">)</span>
    <span style="color: #ff1493;">(</span>find-tag <span style="color: #ffff00;">(</span>ido-completing-read <span style="color: #61CE3C;">"Tag: "</span> tag-names<span style="color: #ffff00;">)</span><span style="color: #ff1493;">)</span><span style="color: #006400;">)</span><span style="color: #8b0000;">)</span>

<span style="color: #8b0000;">(</span><span style="color: #FBDE2D; font-weight: bold;">defun</span> <span style="color: #ff1493;">ido-find-file-in-tag-files</span> <span style="color: #006400;">()</span>
  <span style="color: #006400;">(</span>interactive<span style="color: #006400;">)</span>
  <span style="color: #006400;">(</span><span style="color: #FBDE2D; font-weight: bold;">save-excursion</span>
    <span style="color: #ff1493;">(</span><span style="color: #FBDE2D; font-weight: bold;">let</span> <span style="color: #ffff00;">(</span><span style="color: #00ff00;">(</span>enable-recursive-minibuffers t<span style="color: #00ff00;">)</span><span style="color: #ffff00;">)</span>
      <span style="color: #ffff00;">(</span>visit-tags-table-buffer<span style="color: #ffff00;">)</span><span style="color: #ff1493;">)</span>
    <span style="color: #ff1493;">(</span>find-file
     <span style="color: #ffff00;">(</span>expand-file-name
      <span style="color: #00ff00;">(</span>ido-completing-read
       <span style="color: #61CE3C;">"Project file: "</span> <span style="color: #add8e6;">(</span>tags-table-files<span style="color: #add8e6;">)</span> nil t<span style="color: #00ff00;">)</span><span style="color: #ffff00;">)</span><span style="color: #ff1493;">)</span><span style="color: #006400;">)</span><span style="color: #8b0000;">)</span>

<span style="color: #8b0000;">(</span>global-set-key <span style="color: #006400;">[</span>remap find-tag<span style="color: #006400;">]</span> 'ido-find-tag<span style="color: #8b0000;">)</span>
<span style="color: #8b0000;">(</span>global-set-key <span style="color: #006400;">(</span>kbd <span style="color: #61CE3C;">"C-."</span><span style="color: #006400;">)</span> 'ido-find-file-in-tag-files<span style="color: #8b0000;">)</span>

<span style="color: #586e75;">;; </span><span style="color: #8B8989; font-style: italic;">to improve the movement in files</span>

<span style="color: #8b0000;">(</span><span style="color: #FBDE2D; font-weight: bold;">defvar</span> <span style="color: #D8FA3C;">smart-use-extended-syntax</span> nil
  <span style="color: #2aa198;">"If t the smart symbol functionality will consider extended</span>
<span style="color: #2aa198;">syntax in finding matches, if such matches exist."</span><span style="color: #8b0000;">)</span>

<span style="color: #8b0000;">(</span><span style="color: #FBDE2D; font-weight: bold;">defvar</span> <span style="color: #D8FA3C;">smart-last-symbol-name</span> <span style="color: #61CE3C;">""</span>
  <span style="color: #2aa198;">"Contains the current symbol name.</span>

<span style="color: #2aa198;">This is only refreshed when `</span><span style="color: #4c83ff; font-weight: bold;">last-command</span><span style="color: #2aa198;">' does not contain</span>
<span style="color: #2aa198;">either `</span><span style="color: #4c83ff; font-weight: bold;">smart-symbol-go-forward</span><span style="color: #2aa198;">' or `</span><span style="color: #4c83ff; font-weight: bold;">smart-symbol-go-backward</span><span style="color: #2aa198;">'"</span><span style="color: #8b0000;">)</span>

<span style="color: #8b0000;">(</span>make-local-variable 'smart-use-extended-syntax<span style="color: #8b0000;">)</span>

<span style="color: #8b0000;">(</span><span style="color: #FBDE2D; font-weight: bold;">defvar</span> <span style="color: #D8FA3C;">smart-symbol-old-pt</span> nil
  <span style="color: #2aa198;">"Contains the location of the old point"</span><span style="color: #8b0000;">)</span>

<span style="color: #8b0000;">(</span><span style="color: #FBDE2D; font-weight: bold;">defun</span> <span style="color: #ff1493;">smart-symbol-goto</span> <span style="color: #006400;">(</span>name direction<span style="color: #006400;">)</span>
  <span style="color: #2aa198;">"Jumps to the next NAME in DIRECTION in the current buffer.</span>

<span style="color: #2aa198;">DIRECTION must be either `</span><span style="color: #4c83ff; font-weight: bold;">forward</span><span style="color: #2aa198;">' or `</span><span style="color: #4c83ff; font-weight: bold;">backward</span><span style="color: #2aa198;">'; no other option</span>
<span style="color: #2aa198;">is valid."</span>

  <span style="color: #586e75;">;; </span><span style="color: #8B8989; font-style: italic;">if `</span><span style="color: #4c83ff; font-weight: bold; font-style: italic;">last-command</span><span style="color: #8B8989; font-style: italic;">' did not contain</span>
  <span style="color: #586e75;">;; </span><span style="color: #8B8989; font-style: italic;">`</span><span style="color: #4c83ff; font-weight: bold; font-style: italic;">smart-symbol-go-forward/backward</span><span style="color: #8B8989; font-style: italic;">' then we assume it's a</span>
  <span style="color: #586e75;">;; </span><span style="color: #8B8989; font-style: italic;">brand-new command and we re-set the search term.</span>
  <span style="color: #006400;">(</span><span style="color: #FBDE2D; font-weight: bold;">unless</span> <span style="color: #ff1493;">(</span>memq last-command '<span style="color: #ffff00;">(</span>smart-symbol-go-forward
                               smart-symbol-go-backward<span style="color: #ffff00;">)</span><span style="color: #ff1493;">)</span>
    <span style="color: #ff1493;">(</span>setq smart-last-symbol-name name<span style="color: #ff1493;">)</span><span style="color: #006400;">)</span>
  <span style="color: #006400;">(</span>setq smart-symbol-old-pt <span style="color: #ff1493;">(</span>point<span style="color: #ff1493;">)</span><span style="color: #006400;">)</span>
  <span style="color: #006400;">(</span>message <span style="color: #ff1493;">(</span>format <span style="color: #61CE3C;">"%s scan for symbol \"%s\""</span>
                   <span style="color: #ffff00;">(</span>capitalize <span style="color: #00ff00;">(</span>symbol-name direction<span style="color: #00ff00;">)</span><span style="color: #ffff00;">)</span>
                   smart-last-symbol-name<span style="color: #ff1493;">)</span><span style="color: #006400;">)</span>
  <span style="color: #006400;">(</span><span style="color: #FBDE2D; font-weight: bold;">unless</span> <span style="color: #ff1493;">(</span><span style="color: #FBDE2D; font-weight: bold;">catch</span> '<span style="color: #4c83ff; font-weight: bold;">done</span>
            <span style="color: #ffff00;">(</span><span style="color: #FBDE2D; font-weight: bold;">while</span> <span style="color: #00ff00;">(</span>funcall <span style="color: #add8e6;">(</span><span style="color: #FBDE2D; font-weight: bold;">cond</span>
                             <span style="color: #ffa500;">(</span><span style="color: #6a5acd;">(</span>eq direction 'forward<span style="color: #6a5acd;">)</span> <span style="color: #586e75;">; </span><span style="color: #8B8989; font-style: italic;">forward</span>
                              'search-forward<span style="color: #ffa500;">)</span>
                             <span style="color: #ffa500;">(</span><span style="color: #6a5acd;">(</span>eq direction 'backward<span style="color: #6a5acd;">)</span> <span style="color: #586e75;">; </span><span style="color: #8B8989; font-style: italic;">backward</span>
                              'search-backward<span style="color: #ffa500;">)</span>
                             <span style="color: #ffa500;">(</span>t <span style="color: #6a5acd;">(</span><span style="color: #ff69b4; font-weight: bold; text-decoration: underline;">error</span> <span style="color: #61CE3C;">"Invalid direction"</span><span style="color: #6a5acd;">)</span><span style="color: #ffa500;">)</span><span style="color: #add8e6;">)</span> <span style="color: #586e75;">; </span><span style="color: #8B8989; font-style: italic;">all others</span>
                            smart-last-symbol-name nil t<span style="color: #00ff00;">)</span>
              <span style="color: #00ff00;">(</span><span style="color: #FBDE2D; font-weight: bold;">unless</span> <span style="color: #add8e6;">(</span>memq <span style="color: #ffa500;">(</span>syntax-ppss-context
                             <span style="color: #6a5acd;">(</span>syntax-ppss <span style="color: #d3d3d3;">(</span>point<span style="color: #d3d3d3;">)</span><span style="color: #6a5acd;">)</span><span style="color: #ffa500;">)</span> '<span style="color: #ffa500;">(</span>string comment<span style="color: #ffa500;">)</span><span style="color: #add8e6;">)</span>
                <span style="color: #add8e6;">(</span><span style="color: #FBDE2D; font-weight: bold;">throw</span> '<span style="color: #4c83ff; font-weight: bold;">done</span> t<span style="color: #add8e6;">)</span><span style="color: #00ff00;">)</span><span style="color: #ffff00;">)</span><span style="color: #ff1493;">)</span>
    <span style="color: #ff1493;">(</span>goto-char smart-symbol-old-pt<span style="color: #ff1493;">)</span><span style="color: #006400;">)</span><span style="color: #8b0000;">)</span>

<span style="color: #8b0000;">(</span><span style="color: #FBDE2D; font-weight: bold;">defun</span> <span style="color: #ff1493;">smart-symbol-go-forward</span> <span style="color: #006400;">()</span>
  <span style="color: #2aa198;">"Jumps forward to the next symbol at point"</span>
  <span style="color: #006400;">(</span>interactive<span style="color: #006400;">)</span>
  <span style="color: #006400;">(</span>smart-symbol-goto <span style="color: #ff1493;">(</span>smart-symbol-at-pt 'end<span style="color: #ff1493;">)</span> 'forward<span style="color: #006400;">)</span><span style="color: #8b0000;">)</span>

<span style="color: #8b0000;">(</span><span style="color: #FBDE2D; font-weight: bold;">defun</span> <span style="color: #ff1493;">smart-symbol-go-backward</span> <span style="color: #006400;">()</span>
  <span style="color: #2aa198;">"Jumps backward to the previous symbol at point"</span>
  <span style="color: #006400;">(</span>interactive<span style="color: #006400;">)</span>
  <span style="color: #006400;">(</span>smart-symbol-goto <span style="color: #ff1493;">(</span>smart-symbol-at-pt 'beginning<span style="color: #ff1493;">)</span> 'backward<span style="color: #006400;">)</span><span style="color: #8b0000;">)</span>

<span style="color: #8b0000;">(</span><span style="color: #FBDE2D; font-weight: bold;">defun</span> <span style="color: #ff1493;">smart-symbol-at-pt</span> <span style="color: #006400;">(</span><span style="color: #D8FA3C;">&amp;optional</span> dir<span style="color: #006400;">)</span>
  <span style="color: #2aa198;">"Returns the symbol at point and moves point to DIR (either `</span><span style="color: #4c83ff; font-weight: bold;">beginning</span><span style="color: #2aa198;">' or `</span><span style="color: #4c83ff; font-weight: bold;">en</span><span style="color: #dc8cc3; background-color: #383838; font-weight: bold;">d</span><span style="color: #dc8cc3; background-color: #383838;">') of the symbol.</span>

<span style="color: #2aa198;">If `</span><span style="color: #4c83ff; font-weight: bold;">smart-use-extended-syntax</span><span style="color: #2aa198;">' is t then that symbol is returned</span>
<span style="color: #2aa198;">instead."</span>
  <span style="color: #006400;">(</span><span style="color: #FBDE2D; font-weight: bold;">with-syntax-table</span> <span style="color: #ff1493;">(</span>make-syntax-table<span style="color: #ff1493;">)</span>
    <span style="color: #ff1493;">(</span><span style="color: #FBDE2D; font-weight: bold;">if</span> smart-use-extended-syntax
        <span style="color: #ffff00;">(</span>modify-syntax-entry ?. <span style="color: #61CE3C;">"w"</span><span style="color: #ffff00;">)</span><span style="color: #ff1493;">)</span>
    <span style="color: #ff1493;">(</span>modify-syntax-entry ?_ <span style="color: #61CE3C;">"w"</span><span style="color: #ff1493;">)</span>
    <span style="color: #ff1493;">(</span>modify-syntax-entry ?- <span style="color: #61CE3C;">"w"</span><span style="color: #ff1493;">)</span>
    <span style="color: #586e75;">;; </span><span style="color: #8B8989; font-style: italic;">grab the word and return it</span>
    <span style="color: #ff1493;">(</span><span style="color: #FBDE2D; font-weight: bold;">let</span> <span style="color: #ffff00;">(</span><span style="color: #00ff00;">(</span>word <span style="color: #add8e6;">(</span>thing-at-point 'word<span style="color: #add8e6;">)</span><span style="color: #00ff00;">)</span>
          <span style="color: #00ff00;">(</span>bounds <span style="color: #add8e6;">(</span>bounds-of-thing-at-point 'word<span style="color: #add8e6;">)</span><span style="color: #00ff00;">)</span><span style="color: #ffff00;">)</span>
      <span style="color: #ffff00;">(</span><span style="color: #FBDE2D; font-weight: bold;">if</span> word
          <span style="color: #00ff00;">(</span><span style="color: #FBDE2D; font-weight: bold;">progn</span>
            <span style="color: #add8e6;">(</span><span style="color: #FBDE2D; font-weight: bold;">cond</span>
             <span style="color: #ffa500;">(</span><span style="color: #6a5acd;">(</span>eq dir 'beginning<span style="color: #6a5acd;">)</span> <span style="color: #6a5acd;">(</span>goto-char <span style="color: #d3d3d3;">(</span>car bounds<span style="color: #d3d3d3;">)</span><span style="color: #6a5acd;">)</span><span style="color: #ffa500;">)</span>
             <span style="color: #ffa500;">(</span><span style="color: #6a5acd;">(</span>eq dir 'end<span style="color: #6a5acd;">)</span> <span style="color: #6a5acd;">(</span>goto-char <span style="color: #d3d3d3;">(</span>cdr bounds<span style="color: #d3d3d3;">)</span><span style="color: #6a5acd;">)</span><span style="color: #ffa500;">)</span>
             <span style="color: #ffa500;">(</span>t <span style="color: #6a5acd;">(</span><span style="color: #ff69b4; font-weight: bold; text-decoration: underline;">error</span> <span style="color: #61CE3C;">"Invalid direction"</span><span style="color: #6a5acd;">)</span><span style="color: #ffa500;">)</span><span style="color: #add8e6;">)</span>
            word<span style="color: #00ff00;">)</span>
        <span style="color: #00ff00;">(</span><span style="color: #ff69b4; font-weight: bold; text-decoration: underline;">error</span> <span style="color: #61CE3C;">"No symbol found"</span><span style="color: #00ff00;">)</span><span style="color: #ffff00;">)</span><span style="color: #ff1493;">)</span><span style="color: #006400;">)</span><span style="color: #8b0000;">)</span>

<span style="color: #8b0000;">(</span>global-set-key <span style="color: #006400;">(</span>kbd <span style="color: #61CE3C;">"M-n"</span><span style="color: #006400;">)</span> 'smart-symbol-go-forward<span style="color: #8b0000;">)</span>
<span style="color: #8b0000;">(</span>global-set-key <span style="color: #006400;">(</span>kbd <span style="color: #61CE3C;">"M-p"</span><span style="color: #006400;">)</span> 'smart-symbol-go-backward<span style="color: #8b0000;">)</span>

<span style="color: #586e75;">;; </span><span style="color: #8B8989; font-style: italic;">To dynamically extend emacs via macros</span>

<span style="color: #8b0000;">(</span><span style="color: #FBDE2D; font-weight: bold;">defun</span> <span style="color: #ff1493;">save-macro</span> <span style="color: #006400;">(</span>name<span style="color: #006400;">)</span>
  <span style="color: #2aa198;">"save a macro. Take a name as argument and save the last</span>
<span style="color: #2aa198;">     defined macro under this name at the end of your .emacs"</span>
     <span style="color: #006400;">(</span>interactive <span style="color: #61CE3C;">"SName of the macro :"</span><span style="color: #006400;">)</span>  <span style="color: #586e75;">; </span><span style="color: #8B8989; font-style: italic;">ask for the name of the macro</span>
     <span style="color: #006400;">(</span>kmacro-name-last-macro name<span style="color: #006400;">)</span>         <span style="color: #586e75;">; </span><span style="color: #8B8989; font-style: italic;">use this name for the macro</span>
     <span style="color: #006400;">(</span>find-file user-init-file<span style="color: #006400;">)</span>            <span style="color: #586e75;">; </span><span style="color: #8B8989; font-style: italic;">open ~/.emacs or other user init fi</span><span style="color: #dc8cc3; background-color: #383838; font-style: italic;">le</span>
     <span style="color: #006400;">(</span>goto-char <span style="color: #ff1493;">(</span>point-max<span style="color: #ff1493;">)</span><span style="color: #006400;">)</span>               <span style="color: #586e75;">; </span><span style="color: #8B8989; font-style: italic;">go to the end of the .emacs</span>
     <span style="color: #006400;">(</span>newline<span style="color: #006400;">)</span>                             <span style="color: #586e75;">; </span><span style="color: #8B8989; font-style: italic;">insert a newline</span>
     <span style="color: #006400;">(</span>insert-kbd-macro name<span style="color: #006400;">)</span>               <span style="color: #586e75;">; </span><span style="color: #8B8989; font-style: italic;">copy the macro</span>
     <span style="color: #006400;">(</span>newline<span style="color: #006400;">)</span>                             <span style="color: #586e75;">; </span><span style="color: #8B8989; font-style: italic;">insert a newline</span>
     <span style="color: #006400;">(</span>switch-to-buffer nil<span style="color: #006400;">)</span><span style="color: #8b0000;">)</span>               <span style="color: #586e75;">; </span><span style="color: #8B8989; font-style: italic;">return to the initial buffer</span>

<span style="color: #586e75;">;; </span><span style="color: #8B8989; font-style: italic;">Macro generated by emacs</span>

<span style="color: #8b0000;">(</span>fset 'after-jack-in
      <span style="color: #006400;">(</span><span style="color: #FBDE2D; font-weight: bold;">lambda</span> <span style="color: #ff1493;">(</span><span style="color: #D8FA3C;">&amp;optional</span> arg<span style="color: #ff1493;">)</span>
        <span style="color: #2aa198;">"A macro to dispose emacs buffer as i'm used to after the clojure-jack-i</span><span style="color: #dc8cc3; background-color: #383838;">n is started."</span>
        <span style="color: #ff1493;">(</span>interactive <span style="color: #61CE3C;">"p"</span><span style="color: #ff1493;">)</span>
        <span style="color: #ff1493;">(</span>kmacro-exec-ring-item <span style="color: #ffff00;">(</span>quote <span style="color: #00ff00;">(</span><span style="color: #add8e6;">[</span>24 48 24 50 24 111 134217848 109 117 108<span style="color: #dc8cc3; background-color: #383838;"> 116 105 return 108 101 105 110 32 109 105 100 106 101 32 45 45 108 97 122 121 116 101 115 116 return 24 51 24 111 24 98 110 114 101 112 108 return 24 98 42 110 114 101 112 108 42 return 24 111</span><span style="color: #add8e6; background-color: #383838;">]</span><span style="color: #dc8cc3; background-color: #383838;"> 0 </span><span style="color: #dc8cc3; background-color: #383838;">"%d"</span><span style="color: #00ff00; background-color: #383838;">)</span><span style="color: #ffff00; background-color: #383838;">)</span><span style="color: #dc8cc3; background-color: #383838;"> arg</span><span style="color: #ff1493; background-color: #383838;">)</span><span style="color: #006400; background-color: #383838;">)</span><span style="color: #8b0000; background-color: #383838;">)</span>

<span style="color: #8b0000;">(</span>global-set-key <span style="color: #006400;">(</span>kbd <span style="color: #61CE3C;">"C-c C-i"</span><span style="color: #006400;">)</span> 'after-jack-in<span style="color: #8b0000;">)</span>

<span style="color: #586e75;">;; </span><span style="color: #8B8989; font-style: italic;">Load bindings config</span>
<span style="color: #8b0000;">(</span>live-load-config-file <span style="color: #61CE3C;">"bindings.el"</span><span style="color: #8b0000;">)</span>
</pre>
</div>
<p>
source: <a href="https://github.com/ardumont/emacs-live/blob/3d74b44b30664d36a485fb31456cd9d461a31c3d/packs/live/tony-pack/init.el">old-init.el</a>
</p>

<p>
Then along came&#x2026;
</p>
</div>
</div>
</div>

<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2"><a href="https://github.com/overtone/emacs-live">emacs-live</a></h2>
<div class="outline-text-2" id="text-2">
</div><div id="outline-container-sec-2-1" class="outline-3">
<h3 id="sec-2-1">Beginning</h3>
<div class="outline-text-3" id="text-2-1">
<p>
<a href="https://github.com/overtone/emacs-live">emacs-live</a> is another project aiming at helping beginning coding with <a href="https://github.com/overtone/overtone">overtone</a> and <a href="https://github.com/quil/quil">quil</a>.
</p>

<p>
It's artist/dev oriented people. But, this setup is <a href="http://clojure.org">clojure</a>/java aware, so naturally i gave it a shot.
</p>

<p>
Its dark theme attracted me.
</p>
</div>
</div>

<div id="outline-container-sec-2-2" class="outline-3">
<h3 id="sec-2-2">Install</h3>
<div class="outline-text-3" id="text-2-2">
<p>
So i installed it but i had a different approach this time.
I directly forked emacs-live (via github), then installing my fork on my machine and made it my <b>~/.emacs.d</b> folder:
</p>

<div class="org-src-container">

<pre class="src src-bash">git clone git@github.com:ardumont/emacs-live.git ~/repo/perso/emacs-live
ln -s ~/repo/perso/emacs-live ~/.emacs.d
emacs
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-2-3" class="outline-3">
<h3 id="sec-2-3">Use</h3>
<div class="outline-text-3" id="text-2-3">
<p>
Then i used it and wow! What a default powerful setup!!!
</p>

<p>
It's like they say in their documentation <b>Energy starts surging through your fingertips.</b>
</p>

<p>
At first, i used it because the clojure/java part is really great.
You got a small pop-up when writing your code in all your buffer.
This pop-up provides with a contextual possible completion (clojure, java, emacs-lisp, common-lisp, etc&#x2026;).
</p>
</div>
</div>

<div id="outline-container-sec-2-4" class="outline-3">
<h3 id="sec-2-4">Setup</h3>
<div class="outline-text-3" id="text-2-4">
<p>
But i rapidly missed some bindings coming from <a href="https://github.com/technomancy/emacs-starter-kit">emacs-starter-kit</a>.
</p>
</div>

<div id="outline-container-sec-2-4-1" class="outline-4">
<h4 id="sec-2-4-1">first tryout and success</h4>
<div class="outline-text-4" id="text-2-4-1">
<p>
So i merged the two of them.
</p>

<p>
I first created a branch <b>tony</b> in my fork to keep the master branch clean to be able to rebase overtone team's work on my branch.
</p>

<div class="org-src-container">

<pre class="src src-bash">git checkout -b tony
</pre>
</div>

<p>
And i simply added a small code at the end of the emacs-live's init.el to load mine.
</p>

<p>
It's brutal but it worked&#x2026;
</p>
</div>
</div>

<div id="outline-container-sec-2-4-2" class="outline-4">
<h4 id="sec-2-4-2">live-pack</h4>
<div class="outline-text-4" id="text-2-4-2">
<p>
Then over time, the urge to create a cleaner way came through.
As i became more and more fluent in clojure (which is a lisp), i became more fluent in lisp in general.
So i began to enter into emacs-live and created my own pack.
</p>

<p>
I created a live-pack as already existing functionality explained in emacs-live documentation.
I simply created a <b>tony-pack</b> which is a folder with a specific convention:
</p>

<div class="org-src-container">

<pre class="src src-bash">/home/tony/.emacs.d/packs/live/tony-pack/
├── config
│   └── bindings.el
├── init.el
├── lib
└── README.md
2 directories, 3 files
</pre>
</div>

<p>
And simply, at first, my <b>init.el</b> was my old one.
</p>

<p>
Then added my <b>tony-pack</b> in the list of packages to load at emacs startup time (<b>~/.emacs.el</b>):
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #586e75;">;;</span><span style="color: #8B8989; font-style: italic;">default packs</span>
<span style="color: #8b0000;">(</span><span style="color: #FBDE2D; font-weight: bold;">let*</span> <span style="color: #006400;">(</span><span style="color: #ff1493;">(</span>pack-names '<span style="color: #ffff00;">(</span><span style="color: #61CE3C;">"foundation-pack"</span>
                     <span style="color: #61CE3C;">"colour-pack"</span>
                     <span style="color: #61CE3C;">"clojure-pack"</span>
                     <span style="color: #61CE3C;">"lang-pack"</span>
                     <span style="color: #61CE3C;">"power-pack"</span>
                     <span style="color: #61CE3C;">"git-pack"</span>
                     <span style="color: #61CE3C;">"bindings-pack"</span>
                     <span style="color: #61CE3C;">"tony-pack"</span><span style="color: #ffff00;">)</span><span style="color: #ff1493;">)</span>
       <span style="color: #ff1493;">(</span>live-dir <span style="color: #ffff00;">(</span>file-name-as-directory <span style="color: #61CE3C;">"live"</span><span style="color: #ffff00;">)</span><span style="color: #ff1493;">)</span>
       <span style="color: #ff1493;">(</span>dev-dir  <span style="color: #ffff00;">(</span>file-name-as-directory <span style="color: #61CE3C;">"dev"</span><span style="color: #ffff00;">)</span><span style="color: #ff1493;">)</span><span style="color: #006400;">)</span>
  <span style="color: #006400;">(</span>setq live-packs <span style="color: #ff1493;">(</span>mapcar <span style="color: #ffff00;">(</span><span style="color: #FBDE2D; font-weight: bold;">lambda</span> <span style="color: #00ff00;">(</span>p<span style="color: #00ff00;">)</span> <span style="color: #00ff00;">(</span>concat live-dir p<span style="color: #00ff00;">)</span><span style="color: #ffff00;">)</span> pack-names<span style="color: #ff1493;">)</span> <span style="color: #006400;">)</span>
  <span style="color: #006400;">(</span>setq live-dev-pack-list <span style="color: #ff1493;">(</span>mapcar <span style="color: #ffff00;">(</span><span style="color: #FBDE2D; font-weight: bold;">lambda</span> <span style="color: #00ff00;">(</span>p<span style="color: #00ff00;">)</span> <span style="color: #00ff00;">(</span>concat dev-dir p<span style="color: #00ff00;">)</span><span style="color: #ffff00;">)</span> pack-names<span style="color: #ff1493;">)</span> <span style="color: #006400;">)</span><span style="color: #8b0000; background-color: #383838;">)</span>
</pre>
</div>

<p>
There you have it. Now emacs starts using emacs-live as basis and as extension my starter-kit.
</p>
</div>
</div>

<div id="outline-container-sec-2-4-3" class="outline-4">
<h4 id="sec-2-4-3">Improvements</h4>
<div class="outline-text-4" id="text-2-4-3">
<p>
I added functionalities but i tried to segregate them directly into packs which is more respectuous of the <a href="http://en.wikipedia.org/wiki/Separation_of_concerns">separation of concerns</a>.
</p>

<p>
Here is my current <b>init.el</b>:
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #586e75;">;; </span><span style="color: #8B8989; font-style: italic;">User pack init file</span>
<span style="color: #586e75;">;;</span>
<span style="color: #586e75;">;; </span><span style="color: #8B8989; font-style: italic;">User this file to initiate the pack configuration.</span>
<span style="color: #586e75;">;; </span><span style="color: #8B8989; font-style: italic;">See README for more information.</span>

<span style="color: #586e75;">;; </span><span style="color: #8B8989; font-style: italic;">my init.el snippets of code transformed brutally into a emacs-live live pack</span>
<span style="color: #586e75;">;; </span><span style="color: #8B8989; font-style: italic;">(from emacs-live's init.el)</span>

<span style="color: #586e75;">;; </span><span style="color: #8B8989; font-style: italic;">setup the path</span>
<span style="color: #8b0000;">(</span><span style="color: #FBDE2D; font-weight: bold;">require</span> '<span style="color: #4c83ff; font-weight: bold;">exec-path-from-shell</span><span style="color: #8b0000;">)</span> <span style="color: #586e75;">;; </span><span style="color: #8B8989; font-style: italic;">if not using the ELPA package</span>
<span style="color: #8b0000;">(</span>exec-path-from-shell-initialize<span style="color: #8b0000;">)</span>

<span style="color: #586e75;">;; </span><span style="color: #8B8989; font-style: italic;">some text/font/color tweaks</span>

<span style="color: #8b0000;">(</span>setq-default fill-column 120<span style="color: #8b0000;">)</span>
<span style="color: #8b0000;">(</span>set-face-background 'default <span style="color: #61CE3C;">"</span><span style="color: #ffffff; background-color: #000000;">black</span><span style="color: #61CE3C;">"</span><span style="color: #8b0000;">)</span>

<span style="color: #8b0000;">(</span>set-language-environment <span style="color: #61CE3C;">"UTF-8"</span><span style="color: #8b0000;">)</span>
<span style="color: #8b0000;">(</span>blink-cursor-mode 1<span style="color: #8b0000;">)</span>

<span style="color: #586e75;">;; </span><span style="color: #8B8989; font-style: italic;">puppet-mode for the .pp file</span>

<span style="color: #8b0000;">(</span>add-to-list 'auto-mode-alist '<span style="color: #006400;">(</span><span style="color: #61CE3C;">"\.pp$"</span> . puppet-mode<span style="color: #006400;">)</span><span style="color: #8b0000;">)</span>

<span style="color: #586e75;">;; </span><span style="color: #8B8989; font-style: italic;">C-x C-l to lower case ; C-x C-u to upper case</span>

<span style="color: #8b0000;">(</span>put 'downcase-region 'disabled nil<span style="color: #8b0000;">)</span>
<span style="color: #8b0000;">(</span>put 'upcase-region 'disabled nil<span style="color: #8b0000;">)</span>

<span style="color: #586e75;">;; </span><span style="color: #8B8989; font-style: italic;">To dynamically extend emacs via macros</span>

<span style="color: #8b0000;">(</span><span style="color: #FBDE2D; font-weight: bold;">defun</span> <span style="color: #ff1493;">save-macro</span> <span style="color: #006400;">(</span>name<span style="color: #006400;">)</span>
  <span style="color: #2aa198;">"save a macro. Take a name as argument and save the last</span>
<span style="color: #2aa198;">     defined macro under this name at the end of your .emacs"</span>
     <span style="color: #006400;">(</span>interactive <span style="color: #61CE3C;">"SName of the macro :"</span><span style="color: #006400;">)</span>  <span style="color: #586e75;">; </span><span style="color: #8B8989; font-style: italic;">ask for the name of the macro</span>
     <span style="color: #006400;">(</span>kmacro-name-last-macro name<span style="color: #006400;">)</span>         <span style="color: #586e75;">; </span><span style="color: #8B8989; font-style: italic;">use this name for the macro</span>
     <span style="color: #006400;">(</span>find-file user-init-file<span style="color: #006400;">)</span>            <span style="color: #586e75;">; </span><span style="color: #8B8989; font-style: italic;">open ~/.emacs or other user init fi</span><span style="color: #dc8cc3; background-color: #383838; font-style: italic;">le</span>
     <span style="color: #006400;">(</span>goto-char <span style="color: #ff1493;">(</span>point-max<span style="color: #ff1493;">)</span><span style="color: #006400;">)</span>               <span style="color: #586e75;">; </span><span style="color: #8B8989; font-style: italic;">go to the end of the .emacs</span>
     <span style="color: #006400;">(</span>newline<span style="color: #006400;">)</span>                             <span style="color: #586e75;">; </span><span style="color: #8B8989; font-style: italic;">insert a newline</span>
     <span style="color: #006400;">(</span>insert-kbd-macro name<span style="color: #006400;">)</span>               <span style="color: #586e75;">; </span><span style="color: #8B8989; font-style: italic;">copy the macro</span>
     <span style="color: #006400;">(</span>newline<span style="color: #006400;">)</span>                             <span style="color: #586e75;">; </span><span style="color: #8B8989; font-style: italic;">insert a newline</span>
     <span style="color: #006400;">(</span>switch-to-buffer nil<span style="color: #006400;">)</span><span style="color: #8b0000;">)</span>               <span style="color: #586e75;">; </span><span style="color: #8B8989; font-style: italic;">return to the initial buffer</span>

<span style="color: #586e75;">;; </span><span style="color: #8B8989; font-style: italic;">Load bindings config</span>
<span style="color: #8b0000;">(</span>live-load-config-file <span style="color: #61CE3C;">"bindings.el"</span><span style="color: #8b0000;">)</span>

<span style="color: #586e75;">;; </span><span style="color: #8B8989; font-style: italic;">edit-server</span>
<span style="color: #8b0000;">(</span><span style="color: #FBDE2D; font-weight: bold;">if</span> <span style="color: #006400;">(</span>and <span style="color: #ff1493;">(</span>daemonp<span style="color: #ff1493;">)</span> <span style="color: #ff1493;">(</span>locate-library <span style="color: #61CE3C;">"edit-server"</span><span style="color: #ff1493;">)</span><span style="color: #006400;">)</span>
     <span style="color: #006400;">(</span><span style="color: #FBDE2D; font-weight: bold;">progn</span>
       <span style="color: #ff1493;">(</span><span style="color: #FBDE2D; font-weight: bold;">require</span> '<span style="color: #4c83ff; font-weight: bold;">edit-server</span><span style="color: #ff1493;">)</span>
       <span style="color: #ff1493;">(</span>setq edit-server-new-frame nil<span style="color: #ff1493;">)</span>
       <span style="color: #ff1493;">(</span>edit-server-start<span style="color: #ff1493;">)</span><span style="color: #006400;">)</span><span style="color: #8b0000;">)</span>
</pre>
</div>

<p>
Now my packages list grew like this:
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #8b0000;">(</span>pack-names '<span style="color: #006400;">(</span>...
              <span style="color: #61CE3C;">"tony-install-packages-pack"</span>
              <span style="color: #61CE3C;">"tony-pack"</span>
              <span style="color: #61CE3C;">"tony-blog-pack"</span>
              <span style="color: #61CE3C;">"tony-haskell-pack"</span>
              <span style="color: #61CE3C;">"tony-java-pack"</span>
              <span style="color: #61CE3C;">"tony-lisp-pack"</span>
              <span style="color: #61CE3C;">"tony-orgmode-pack"</span>
              <span style="color: #61CE3C;">"tony-buffer-pack"</span><span style="color: #006400;">)</span><span style="color: #8b0000;">)</span>
</pre>
</div>

<p>
where:
</p>
<ul class="org-ul">
<li>tony-install-packages-pack: A pack which install all the needed packages not already loaded via emacs-live (it may disappear so that each pack is responsible for doing the install).
</li>
<li>tony-blog-pack: my setup to post my org-mode files into my blog wordpress
</li>
<li>tony-haskell-pack: my haskell setup
</li>
<li>tony-java-pack: my java setup (not yet full functional, it's a start)
</li>
<li>tony-lisp-pack: my clojure, common-lisp, emacs-lisp setup (adding hooks)
</li>
<li>tony-org-mode: org-mode setup (added keywords, bindings, etc&#x2026;)
</li>
<li>tony-buffer-pack: a pack regarding fast movement/edition in the buffers
</li>
<li>tony-pack: the remainder of my first tony-pack not yet exploded into packs.
</li>
</ul>

<p>
At the moment, those packs are available in my fork in the branch <b>tony</b>.
</p>
</div>
</div>

<div id="outline-container-sec-2-4-4" class="outline-4">
<h4 id="sec-2-4-4">Future</h4>
<div class="outline-text-4" id="text-2-4-4">
<p>
As always, there remains work to be done:
</p>
<ul class="org-ul">
<li>Continue my work of cleaning up my existing <b>tony-pack</b> and create some other packs (tony-org-mode-pack, tony-clojure-pack, etc&#x2026;)
</li>
<li>Rename those packs and maybe create some git repositories dedicated for each of them.
</li>
</ul>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-3" class="outline-2">
<h2 id="sec-3">Conclusion</h2>
<div class="outline-text-2" id="text-3">
<p>
There you have it, my experience with emacs-starter-kit and emacs-live.
</p>
</div>
</div>
